// Copyright Â©2016-2023 by Richard A. Wilkes. All rights reserved.
//
// This Source Code Form is subject to the terms of the Mozilla Public
// License, version 2.0. If a copy of the MPL was not distributed with
// this file, You can obtain one at http://mozilla.org/MPL/2.0/.
//
// This Source Code Form is "Incompatible With Secondary Licenses", as
// defined by the Mozilla Public License, version 2.0.

package poly_test

import (
	"testing"

	"github.com/richardwilkes/toolbox/check"
)

func TestXor(t *testing.T) {
	tests := []testCase{
		{
			name:     "xor #1",
			subject:  Polygon{{{24, 7}, {36, 7}, {36, 23}, {24, 23}}},
			clipping: circle,
			expected: Polygon{
				{
					{24, 23},
					{24, 7},
					{23.16377229385877, 7.043824837053813},
					{22.33670647345792, 7.1748191941295545},
					{21.527864045000413, 7.391547869638772},
					{20.746106855393588, 7.691636338859194},
					{19.99999999999999, 8.071796769724493},
					{19.297717981660202, 8.527864045000424},
					{18.64695514912912, 9.054841396180851},
					{18.05484139618083, 9.646955149129141},
					{17.527864045000403, 10.297717981660224},
					{17.07179676972447, 11.00000000000001},
					{16.691636338859173, 11.746106855393611},
					{16.39154786963875, 12.527864045000435},
					{16.174819194129533, 13.33670647345794},
					{16.04382483705379, 14.16377229385879},
					{15.999999999999977, 15.00000000000002},
					{16.04382483705379, 15.83622770614125},
					{16.174819194129533, 16.6632935265421},
					{16.39154786963875, 17.472135954999604},
					{16.691636338859173, 18.25389314460643},
					{17.07179676972447, 19.00000000000003},
					{17.527864045000403, 19.702282018339815},
					{18.05484139618083, 20.353044850870898},
					{18.64695514912912, 20.945158603819188},
					{19.297717981660202, 21.472135954999615},
					{19.99999999999999, 21.928203230275546},
					{20.746106855393588, 22.308363661140845},
					{21.527864045000413, 22.608452130361268},
					{22.33670647345792, 22.825180805870485},
					{23.16377229385877, 22.956175162946227},
					{24, 23.00000000000004},
				},
				{
					{24, 23.00000000000004},
					{24.83622770614123, 22.956175162946227},
					{25.66329352654208, 22.825180805870485},
					{26.472135954999587, 22.608452130361268},
					{27.253893144606412, 22.308363661140845},
					{28.00000000000001, 21.928203230275546},
					{28.702282018339798, 21.472135954999615},
					{29.35304485087088, 20.945158603819188},
					{29.94515860381917, 20.353044850870898},
					{30.472135954999597, 19.702282018339815},
					{30.92820323027553, 19.00000000000003},
					{31.308363661140827, 18.25389314460643},
					{31.60845213036125, 17.472135954999604},
					{31.825180805870467, 16.6632935265421},
					{31.95617516294621, 15.83622770614125},
					{32.00000000000002, 15.00000000000002},
					{31.95617516294621, 14.16377229385879},
					{31.825180805870467, 13.33670647345794},
					{31.60845213036125, 12.527864045000435},
					{31.308363661140827, 11.746106855393611},
					{30.92820323027553, 11.00000000000001},
					{30.472135954999597, 10.297717981660224},
					{29.94515860381917, 9.646955149129141},
					{29.35304485087088, 9.054841396180851},
					{28.702282018339798, 8.527864045000424},
					{28.00000000000001, 8.071796769724493},
					{27.253893144606412, 7.691636338859195},
					{26.472135954999587, 7.391547869638773},
					{25.66329352654208, 7.174819194129555},
					{24.83622770614123, 7.043824837053814},
					{24, 7},
					{36, 7},
					{36, 23},
				},
			},
		},
	}
	for i, test := range tests {
		check.Equal(t, test.expected, test.subject.Xor(test.clipping), "test case %d (%s)", i, test.name)
	}
}
